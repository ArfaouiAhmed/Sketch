(this.webpackJsonpsketch=this.webpackJsonpsketch||[]).push([[0],{33:function(e,t,n){e.exports=n(57)},38:function(e,t,n){},49:function(e,t){},50:function(e,t){},51:function(e,t){},52:function(e,t){},53:function(e,t){},54:function(e,t){},56:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},57:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(24),o=n.n(c);n(38),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(39);var l=n(4);function u(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap"}},t)}function s(e){var t=e.children,n=e.size,a=void 0===n?1:n;return r.a.createElement("div",{style:{flex:a,flexBasis:"0%"}},t)}var i=n(25),m=n.n(i),f=function(e){var t=e.text;return Object(a.useEffect)((function(){var e={strings:[t],typeSpeed:50},n=new m.a("#TypedText",e);return function(){n.destroy()}}),[t]),r.a.createElement("div",null,r.a.createElement("section",{id:"TypedText"}))},d=n(26),p=n(27),h=n(32),b=n(31),E=n(28),g=n.n(E),v=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement("section",{className:g()(this.props.className,"nes-container",{"with-title":this.props.title,"is-dark":this.props.dark}),style:this.props.style},this.props.title&&a.createElement("h2",{className:"title"},this.props.title),this.props.children)}}]),n}(a.Component);function x(e){var t=y.find((function(t){return t.status===e}));if(t.text.length>0)return t.text}var y=[{status:"gameStart",text:"let's get started."},{status:"gameSuccess",text:"You know, that was a damn \nfine sketch!"},{status:"gameFailure",text:"Not good enough, but here's \nan other chance."},{status:"gameEndSuccess",text:"Very Good, you scores scoreValue points."},{status:"gameEndFailure",text:"Womp,womp... Try harder next time,and\nmaybe you'll score more than scoreValue points. "},{status:"welcome",text:'This game has been modeled-off Google`s <a href="https://quickdraw.withgoogle.com/">Quick Draw!</a> game,\n and uses a sampling from the Quick, Draw! <a href="https://github.com/googlecreativelab/quickdraw-dataset">dataset</a>.'},{status:"toYouby",text:"Brought to you by the EPFL extention School."}],w=n(7),k={position:"absolute",left:"850px",top:"15px"},j={position:"absolute",left:"800px",top:"70px"},O={height:"160px"};function S(){var e=Object(a.useContext)(Q),t=e.resetRounds,n=e.score,c=e.dispatch,o=e.resetGamingText,l=x(n>8?"gameEndSuccess":"gameEndFailure").replace("scoreValue",n);return r.a.createElement(v,{style:O,title:"Sketch!",dark:!0},r.a.createElement(u,null,r.a.createElement(s,null,r.a.createElement(f,{text:l})),r.a.createElement(s,null,r.a.createElement(u,null,"\xa0"),r.a.createElement(u,null,r.a.createElement(w.b,{to:"/"},r.a.createElement("button",{type:"button",style:k,className:"nes-btn"},"Home")),r.a.createElement(w.b,{to:"/game"},r.a.createElement("button",{className:"nes-btn is-warning",style:j,onClick:function(){t(),o(),c({type:"reset"})}},"Try Again."))))))}var C=n(12);function T(e,t){switch(t.type){case"reset":return 0;case"one":return e+1;case"two":return e+2;default:return e}}var R=r.a.forwardRef((function(e,t){var n,c,o=!1;return Object(a.useEffect)((function(){var e=t.current,n=e.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,e.height,e.width)})),r.a.createElement("canvas",{height:300,width:300,ref:t,onMouseDown:function(){return o=!0},onMouseUp:function(){o=!1,n=void 0,c=void 0},onMouseMove:function(e){return function(e){var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientY-t.top;if(o){var u=function(e,t,n,a,r){var c=e.getContext("2d");return c.strokeStyle="#000000",c.lineWidth=12,c.lineJoin="round",c.beginPath(),c.moveTo(a,r),c.lineTo(t,n),c.closePath(),c.stroke(),[t,n]}(e.target,a,r,n,c),s=Object(l.a)(u,2);n=s[0],c=s[1]}}(e)}})})),N=n(20),P=n.n(N),F=n(30);function B(e,t){var n,a=(n=e,C.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.then((function(e){return e.predict(a).data()})).then(function(){var e=Object(F.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var D=n(2),G={position:"absolute",left:"500px",top:"300px"},I={position:"absolute",left:"500px",top:"250px"};function J(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.nextRound,c=e.score,o=e.dispatch,u=e.ref,s=e.model,i=e.labels,m=e.failureText,f=e.sucessText,d=Object(a.useState)(""),p=Object(l.a)(d,2),h=p[0],b=p[1],E=Object(a.useContext)(M),g=E.seconds,v=E.resetTimer,x=Object(D.f)();function y(){console.log("Prediction: "+h),m(),B(u,s).then((function(e){b(i[e[0]]),i[e[0]]===i[t]&&(f(),g<10?(o({type:"one"}),console.log("+1")):(o({type:"two"}),console.log("+2")))})),n(),v(),x.push("game")}return r.a.createElement("div",null,g>0?r.a.createElement("div",null,r.a.createElement("button",{style:G,className:"nes-btn is-warning",id:"clear",onClick:function(){var e=u.current;e.getContext("2d").fillRect(0,0,e.height,e.width)}},"Clear the canvas."),r.a.createElement("button",{className:"nes-btn is-warning",style:I,onClick:function(){return y()},id:"predict"},"Predict the drawing."),r.a.createElement("div",null,"your Score : ",c)):y())}var M=r.a.createContext({});function V(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.labels,c=function(){var e=Object(a.useState)(20),t=Object(l.a)(e,2),n=t[0],r=t[1];return[setInterval((function(){0===n?clearInterval():r(n-1)}),1e3),n,function(){return r(20)}]}(),o=Object(l.a)(c,3),u=o[0],s=o[1],i=o[2];return Object(a.useEffect)((function(){return function(){return clearInterval(u)}}),[t,n,u]),r.a.createElement("div",null,"you have ",s," to draw ",n[t],r.a.createElement(M.Provider,{value:{seconds:s,resetTimer:i}},r.a.createElement(J,null)))}var W={position:"relative",left:"850px",top:"-20px"};function Y(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.ref,c=e.labels,o=e.gamingtext;return r.a.createElement(v,{title:"Sketch! - Round "+(t+1)+" of "+c.length,dark:!0},r.a.createElement("div",null,r.a.createElement(w.b,{to:"/"},r.a.createElement("button",{type:"button",style:W,className:"nes-btn"},"Home"))),r.a.createElement(u,null,r.a.createElement(s,null,r.a.createElement(R,{ref:n})),r.a.createElement(s,null,r.a.createElement(u,null,r.a.createElement(f,{text:x(o)})),r.a.createElement(u,null),r.a.createElement(u,null,"\xa0"),r.a.createElement(u,null,r.a.createElement(V,null)))))}var q=C.c("/Sketch/model/model.json"),z=n(56),H=r.a.createRef(),Q=r.a.createContext();function A(){var e=function(e){var t=Object(a.useState)(0),n=Object(l.a)(t,2),r=n[0],c=n[1];return[r,c,function(){return c(r+1)},function(){return c(0)}]}(),t=Object(l.a)(e,4),n=t[0],c=t[1],o=t[2],u=t[3],s=Object(a.useReducer)(T,0),i=Object(l.a)(s,2),m=i[0],f=i[1],d=function(){var e=Object(a.useState)("gameStart"),t=Object(l.a)(e,2),n=t[0],r=t[1];return[n,function(){return r("gameFailure")},function(){return r("gameSuccess")},function(){return r("gameStart")}]}(),p=Object(l.a)(d,4),h=p[0],b=p[1],E=p[2],g=p[3];return r.a.createElement(Q.Provider,{value:{currentRound:n,setCurrentRound:c,nextRound:o,resetRounds:u,score:m,dispatch:f,ref:H,model:q,labels:z,gamingtext:h,failureText:b,sucessText:E,resetGamingText:g}},n>9?r.a.createElement(S,null):r.a.createElement(Y,null))}function L(){return r.a.createElement(v,{dark:!0},r.a.createElement(s,null,r.a.createElement("h1",null,"Sketch!"),r.a.createElement(u,null,r.a.createElement(f,{text:x("welcome")})),r.a.createElement(u,null,"\xa0"),r.a.createElement(u,null,x("toYouby")),r.a.createElement(u,null,"\xa0"),r.a.createElement(w.b,{to:"/game"},r.a.createElement("button",{type:"button",className:"nes-btn"},"Play game"))))}o.a.render(r.a.createElement(w.a,{basename:"/Sketch"},r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/"},r.a.createElement(L,null)),r.a.createElement(D.a,{path:"/game"},r.a.createElement(A,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.562b2a82.chunk.js.map