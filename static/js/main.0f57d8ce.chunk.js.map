{"version":3,"sources":["serviceWorker.js","components/FlexRow.js","components/FlexColumn.js","components/GamingText.js","components/NesContainer.js","components/AppText.js","components/Result.js","components/Score.js","components/Canvas.js","helpers.js","components/Controls.js","components/Round.js","components/Timer.js","components/Game.js","App.js","components/Home.js","index.js"],"names":["Boolean","window","location","hostname","match","FlexRow","children","style","display","flexFlow","Column","size","flex","flexBasis","GamingText","options","strings","this","props","typeSpeed","backSpeed","typed","Typed","el","destroy","className","whiteSpace","ref","React","Component","NesContainer","classNames","title","dark","getAppropriateText","gameStatus","textElement","AppTexts","find","o","status","text","length","homeBtnStyle","position","left","top","tryBtnStyle","resultContainer","height","Result","useContext","GameContext","resetRounds","score","dispatch","to","type","onClick","scoreReducer","scoreState","action","Canvas","forwardRef","lastX","lastY","mouseDown","useEffect","canvas","current","context","getContext","fillStyle","fillRect","width","onMouseDown","onMouseUp","undefined","onMouseMove","e","rect","target","getBoundingClientRect","x","clientX","y","clientY","strokeStyle","lineWidth","lineJoin","beginPath","moveTo","lineTo","closePath","stroke","drawLine","handleMousemove","getPrediction","theCanvas","model","tensor","tf","fromPixels","resizeNearestNeighbor","mean","expandDims","toFloat","div","then","loadedModel","predict","data","prediction","a","clearBtnStyle","predictBtnStyle","Controls","currentRound","nextRound","labels","useState","setPrediction","RoundContext","seconds","resetTimer","history","useHistory","console","log","push","id","createContext","Round","setSeconds","setInterval","clearInterval","useTimer","timer","Provider","value","Game","process","require","createRef","App","setCurrentRound","useRounds","useReducer","Home","ReactDOM","render","basename","exact","path","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0f57d8ce.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\n\r\nexport default function FlexRow({ children }) {\r\n    return (\r\n        <div style={{ display: \"flex\", flexFlow: \"row nowrap\" }}>{children}</div>\r\n    );\r\n}","import React from \"react\";\r\n\r\nexport default function Column({ children, size = 1 }) {\r\n    return <div style={{ flex: size, flexBasis: '0%' }}>{children}</div>;\r\n}","import React from 'react';\r\nimport Typed from 'typed.js';\r\n\r\nclass GamingText extends React.Component {\r\n    componentDidMount() {\r\n        // If you want to pass more options as props, simply add\r\n        // your desired props to this destructuring assignment.\r\n        const { strings } = this.props;\r\n        // You can pass other options here, such as typing speed, back speed, etc.\r\n        const options = {\r\n            strings: strings,\r\n            typeSpeed: 50,\r\n            backSpeed: 50\r\n        };\r\n        // this.el refers to the <span> in the render() method\r\n        this.typed = new Typed(this.el, options);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Make sure to destroy Typed instance on unmounting\r\n        // to prevent memory leaks\r\n        this.typed.destroy();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"wrap\">\r\n          <span\r\n              style={{ whiteSpace: 'pre' }}\r\n              ref={(el) => { this.el = el; }}\r\n          />\r\n                </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default GamingText;","import * as React from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\n\r\nclass NesContainer extends React.Component {\r\n    render() {\r\n        return <section\r\n                className={classNames(this.props.className, \"nes-container\", {\r\n                    \"with-title\": this.props.title,\r\n                    \"is-dark\": this.props.dark\r\n                })}\r\n                style={this.props.style}\r\n            >\r\n                {this.props.title && <h2 className=\"title\">{this.props.title}</h2>}\r\n                {this.props.children}\r\n            </section>;\r\n    }\r\n}\r\n\r\nexport default NesContainer;","\n\nexport function getAppropriateText(gameStatus) {\n    let textElement = AppTexts.find(o => o.status === gameStatus);\n    if(textElement.text.length > 0){\n        return textElement.text;\n    }\n}\n\nconst AppTexts =[\n    {\n        status: \"gameStart\",\n        text: \"let's get started.\"\n    },\n    {\n        status: \"gameSuccess\",\n        text: \"You know, that was a damn \\nfine sketch!\"\n    },\n    {\n        status: \"gameFailure\",\n        text: \"Not good enough, but here's \\nan other chance.\"\n    },\n    {\n        status: \"gameEndSuccess\",\n        text: \"Very Good, you scores 2 points.\"\n    },\n    {\n        status: \"gameEndFailure\",\n        text: \"Womp,womp... Try harder next time,and\\nmaybe you'll score more\"\n    },\n    {\n        status: \"welcome\",\n        text: \"This game has been modeled-off Google`s <a href=\\\"https://quickdraw.withgoogle.com/\\\">Quick Draw!</a> game,\\n and uses a sampling from the Quick, Draw! <a href=\\\"https://github.com/googlecreativelab/quickdraw-dataset\\\">dataset</a>.\"\n    },{\n        status: \"toYouby\",\n        text: \"Brought to you by the EPFL extention School.\"\n    }\n\n];\n\n\n","import FlexRow from \"./FlexRow\";\nimport FlexColumn from \"./FlexColumn\";\nimport GamingText from \"./GamingText\";\nimport NesContainer from \"./NesContainer\";\nimport {getAppropriateText} from \"./AppText\";\nimport React, {useContext} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {GameContext} from \"../App\";\n\nconst homeBtnStyle = {\n    position: 'absolute',\n    left: '850px',\n    top: '15px'\n};\n\nconst tryBtnStyle = {\n    position: 'absolute',\n    left: '800px',\n    top: '70px'\n};\n\nconst resultContainer = {\n    height: '160px'\n};\n\n\nfunction Result() {\n    const { resetRounds ,score ,dispatch} = useContext(GameContext);\n\n\n\n    return (\n        <NesContainer style={resultContainer} title={\"Sketch!\"} dark >\n            <FlexRow>\n                <FlexColumn>\n                    you scored : {score}\n                    <GamingText strings={[getAppropriateText(\"gameEndFailure\")]}/>\n                </FlexColumn>\n                <FlexColumn>\n                    <FlexRow>\n                        &nbsp;\n                    </FlexRow>\n                    <FlexRow>\n                        <Link to=\"/\">\n                            <button type=\"button\"\n                                    style={homeBtnStyle}\n                                    className=\"nes-btn\">\n                                Home\n                            </button>\n                        </Link>\n                        <Link to=\"/game\">\n                            <button\n                                className=\"nes-btn is-warning\"\n                                style={tryBtnStyle}\n                                onClick={() => {\n                                    resetRounds();\n                                    dispatch({type: \"reset\"});\n                                }}>\n                                Try Again.\n                            </button>\n                        </Link>\n                    </FlexRow>\n                </FlexColumn>\n            </FlexRow>\n        </NesContainer>\n    );\n}\n\nexport {Result};","\nexport function scoreReducer(scoreState, action) {\n    switch (action.type) {\n        case \"reset\":\n            return 0;\n        case \"one\":\n            return scoreState + 1;\n        case \"two\":\n            return scoreState + 2;\n        default:\n            return scoreState;\n    }\n}\n","import React, {useEffect} from \"react\";\n\n\nconst Canvas = React.forwardRef((props, ref) => {\n    let mouseDown = false;\n    let lastX;\n    let lastY;\n\n    function drawLine(canvas, x, y, lastX, lastY) {\n        let context = canvas.getContext(\"2d\");\n\n        context.strokeStyle = \"#000000\";\n        context.lineWidth = 12;\n        context.lineJoin = \"round\";\n\n        context.beginPath();\n        context.moveTo(lastX, lastY);\n        context.lineTo(x, y);\n        context.closePath();\n        context.stroke();\n\n        return [x, y];\n    }\n\n    const handleMouseup = () => {\n        mouseDown = false;\n        [lastX, lastY] = [undefined, undefined];\n    };\n\n    const handleMousemove = e => {\n        const rect = e.target.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n\n        if (mouseDown) {\n            [lastX, lastY] = drawLine(e.target, x, y, lastX, lastY);\n        }\n    };\n\n    useEffect(() => {\n        const canvas = ref.current;\n        const context = canvas.getContext(\"2d\");\n\n        context.fillStyle = \"#ffffff\";\n        context.fillRect(0, 0, canvas.height, canvas.width);\n    });\n\n    return (\n        <canvas\n            height={300}\n            width={300}\n            ref={ref}\n            onMouseDown={() => (mouseDown = true)}\n            onMouseUp={handleMouseup}\n            onMouseMove={e => handleMousemove(e)}\n        />\n    );\n});\n\nexport { Canvas };","import * as tf from \"@tensorflow/tfjs\";\r\n\r\nfunction preprocessCanvas(canvas) {\r\n    // Preprocess image for the network\r\n    let tensor = tf\r\n        .browser\r\n        .fromPixels(canvas.current) // Shape: (300, 300, 3) - RGB image\r\n        .resizeNearestNeighbor([28, 28]) // Shape: (28, 28, 3) - RGB image\r\n        .mean(2) // Shape: (28, 28) - grayscale\r\n        .expandDims(2) // Shape: (28, 28, 1) - network expects 3d values with channels in the last dimension\r\n        .expandDims() // Shape: (1, 28, 28, 1) - network makes predictions for \"batches\" of images\r\n        .toFloat(); // Network works with floating points inputs\r\n    return tensor.div(255.0); // Normalize [0..255] values into [0..1] range\r\n}\r\n\r\nexport function getPrediction(theCanvas, model) {\r\n    const tensor = preprocessCanvas(theCanvas);\r\n    return model\r\n        .then(loadedModel => loadedModel.predict(tensor).data())\r\n        .then(async prediction => await tf.argMax(prediction).data()); // returns an int32 containing the predicted class\r\n}\r\n","import React, {useContext, useState} from \"react\";\nimport {getPrediction} from \"../helpers\";\nimport {useHistory} from \"react-router-dom\";\nimport {GameContext} from \"../App\";\nimport {RoundContext} from \"./Round\";\n\n\nconst clearBtnStyle = {\n    position: 'absolute',\n    left: '500px',\n    top: '300px'\n};\n\nconst predictBtnStyle = {\n    position: 'absolute',\n    left: '500px',\n    top: '250px'\n};\n\n\nfunction Controls() {\n    const {currentRound, nextRound, score, dispatch, ref, model, labels} = useContext(GameContext);\n    const [prediction, setPrediction] = useState(\"\"); // Sets default label to empty string.\n    const {seconds, resetTimer} = useContext(RoundContext);\n    const history = useHistory();\n\n\n    function predict() {\n        console.log(\"Prediction: \" + prediction);\n        getPrediction(ref, model).then(prediction => {\n                setPrediction(labels[prediction[0]]);\n                if (labels[prediction[0]] === labels[currentRound]) {\n                    if (seconds < 10) {\n                        dispatch({type: \"one\"});\n                        console.log(\"+1\");\n                    } else {\n                        dispatch({type: \"two\"});\n                        console.log(\"+2\")\n                    }\n                }\n            }\n        )\n\n        nextRound();\n        resetTimer();\n        history.push(\"game\");\n    }\n\n\n    return (\n        <div>\n            {seconds > 0 ? <div>\n\n                    <button\n                        style={clearBtnStyle}\n                        className=\"nes-btn is-warning\"\n                        id=\"clear\"\n                        onClick={() => {\n                            const canvas = ref.current;\n                            const ctx = canvas.getContext(\"2d\");\n                            ctx.fillRect(0, 0, canvas.height, canvas.width);\n                        }}\n                    >\n                        Clear the canvas.\n                    </button>\n                    <button\n                        className=\"nes-btn is-warning\"\n                        style={predictBtnStyle}\n                        onClick={() => predict()}\n                        id=\"predict\"\n                    >\n                        Predict the drawing.\n                    </button>\n                    <div>\n                        your Score : {score}\n                    </div>\n                </div>\n                : predict()}\n        </div>\n    );\n}\n\nexport {Controls};","import React, {useEffect, useContext} from \"react\";\nimport {Controls} from \"./Controls\";\nimport {GameContext} from \"../App\";\nimport {useTimer} from \"./Timer\";\n\nconst RoundContext = React.createContext({});\n\nfunction Round() {\n    const {currentRound, labels} = useContext(GameContext);\n    const [timer, seconds, resetTimer] = useTimer();\n\n    useEffect(() => {\n        return () => clearInterval(timer);\n    }, [currentRound, labels, timer]);\n\n    return (\n            <div>\n                you have {seconds} to draw {labels[currentRound]}\n                <RoundContext.Provider value={{\n                    seconds: seconds,\n                    resetTimer: resetTimer\n                }}>\n                    <Controls/>\n                </RoundContext.Provider>\n            </div>\n    );\n}\n\nexport {Round, RoundContext};","import { useState } from \"react\";\n\nexport function useTimer() {\n    const [seconds, setSeconds] = useState(20);\n\n    const interval = setInterval(() => {\n        if (seconds === 0) {\n            clearInterval();\n        } else {\n            setSeconds(seconds - 1);\n        }\n    }, 1000);\n\n    return [interval, seconds, () => setSeconds(20)];\n}","import {Link} from \"react-router-dom\";\nimport FlexRow from \"./FlexRow\";\nimport FlexColumn from \"./FlexColumn\";\nimport {Canvas} from \"./Canvas\";\nimport GamingText from \"./GamingText\";\nimport {getAppropriateText} from \"./AppText\";\nimport NesContainer from \"./NesContainer\";\nimport React, {useContext} from \"react\";\nimport {Round} from \"./Round\";\nimport {GameContext} from \"../App\";\n\n\nconst homeBtnStyle = {\n    position: 'relative',\n    left: '850px',\n    top: '-20px'\n};\n\nfunction Game() {\n    const {currentRound, ref, labels} = useContext(GameContext);\n\n    return(\n        <NesContainer title={\"Sketch! - Round \" + (currentRound + 1) + \" of \" + labels.length} dark>\n            <div>\n                <Link to=\"/\">\n                    <button type=\"button\"\n                            style={homeBtnStyle}\n                            className=\"nes-btn\">\n                        Home\n                    </button>\n                </Link>\n            </div>\n            <FlexRow>\n                <FlexColumn>\n                    <Canvas ref={ref}/>\n                </FlexColumn>\n                <FlexColumn>\n                    <FlexRow>\n                        <GamingText strings={[getAppropriateText(\"gameFailure\")]}/>\n                    </FlexRow>\n                    <FlexRow>\n\n                    </FlexRow>\n                    <FlexRow>\n                        &nbsp;\n                    </FlexRow>\n                    <FlexRow>\n                        <Round/>\n                    </FlexRow>\n                </FlexColumn>\n            </FlexRow>\n        </NesContainer>\n    );\n\n}\n\nexport {Game}","import React, {useReducer, useState} from \"react\";\nimport {Result} from \"./components/Result\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport {scoreReducer} from \"./components/Score\";\nimport {Game} from \"./components/Game\";\n\nconst model = tf.loadLayersModel(process.env.PUBLIC_URL + \"/model/model.json\");\nconst labels = require(\"./labels.json\");\nlet ref = React.createRef();\n\nconst GameContext = React.createContext();\n\nfunction useRounds(labels) {\n    let [currentRound, setCurrentRound] = useState(0);\n    return [currentRound, setCurrentRound, () => setCurrentRound(currentRound + 1), () => setCurrentRound(0)];\n}\n\nfunction App() {\n\n    const [currentRound, setCurrentRound, nextRound, resetRounds] = useRounds();\n    const [score, dispatch] = useReducer(scoreReducer, 0);\n\n    return (\n        <GameContext.Provider value={{\n            currentRound: currentRound,\n            setCurrentRound: setCurrentRound,\n            nextRound: nextRound,\n            resetRounds: resetRounds,\n            score: score,\n            dispatch: dispatch,\n            ref: ref,\n            model: model,\n            labels: labels\n        }}>\n            {currentRound > 9 ? <Result/> : <Game/>}\n        </GameContext.Provider>\n    );\n}\n\n\nexport {App, GameContext};","import FlexRow from \"./FlexRow\";\nimport FlexColumn from \"./FlexColumn\";\nimport NesContainer from \"./NesContainer\";\nimport {getAppropriateText} from \"./AppText\";\nimport React from \"react\";\nimport GamingText from \"./GamingText\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction Home() {\n\n\n    return (\n        <NesContainer dark >\n            <FlexColumn>\n                <h1>Sketch!</h1>\n                    <FlexRow>\n                        <GamingText strings={[getAppropriateText(\"welcome\")]}/>\n                    </FlexRow>\n                    <FlexRow>\n                        &nbsp;\n                    </FlexRow>\n                    <FlexRow>\n                        { getAppropriateText(\"toYouby\") }\n                    </FlexRow>\n                    <FlexRow>\n                        &nbsp;\n                    </FlexRow>\n                <Link to=\"/game\">\n                <button type=\"button\"\n                        className=\"nes-btn\">\n                    Play game\n                </button>\n                </Link>\n            </FlexColumn>\n        </NesContainer>\n    );\n}\n\nexport {Home};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport \"nes.css/css/nes.min.css\";\nimport {App} from \"./App\";\nimport {Home} from \"./components/Home\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n} from \"react-router-dom\";\n\n\nReactDOM.render(\n    <Router basename={process.env.PUBLIC_URL}>\n        <Switch>\n            <Route exact path=\"/\">\n                <Home/>\n            </Route>\n            <Route path=\"/game\">\n                <App/>\n            </Route>\n        </Switch>\n    </Router>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}