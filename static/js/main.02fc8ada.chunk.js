(this.webpackJsonpsketch=this.webpackJsonpsketch||[]).push([[0],{23:function(e,t,n){e.exports=n(48)},28:function(e,t,n){},40:function(e,t){},41:function(e,t){},42:function(e,t){},43:function(e,t){},44:function(e,t){},45:function(e,t){},47:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(18),c=n.n(o);n(28),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(29);var l=n(2);function s(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap"}},t)}function u(e){var t=e.children,n=e.size,a=void 0===n?1:n;return r.a.createElement("div",{style:{flex:a,flexBasis:"0%"}},t)}var i=n(9),m=n(10),f=n(12),d=n(11),p=n(19),h=n.n(p),b=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e={strings:this.props.strings,typeSpeed:50,backSpeed:50};this.typed=new h.a(this.el,e)}},{key:"componentWillUnmount",value:function(){this.typed.destroy()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrap"},r.a.createElement("span",{style:{whiteSpace:"pre"},ref:function(t){e.el=t}}))}}]),n}(r.a.Component),v=n(20),E=n.n(v),g=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return a.createElement("section",{className:E()(this.props.className,"nes-container",{"with-title":this.props.title,"is-dark":this.props.dark}),style:this.props.style},this.props.title&&a.createElement("h2",{className:"title"},this.props.title),this.props.children)}}]),n}(a.Component);function y(e){var t=x.find((function(t){return t.status===e}));if(t.text.length>0)return t.text}var x=[{status:"gameStart",text:"let's get started."},{status:"gameSuccess",text:"You know, that was a damn \nfine sketch!"},{status:"gameFailure",text:"Not good enough, but here's \nan other chance."},{status:"gameEndSuccess",text:"Very Good, you scores 2 points."},{status:"gameEndFailure",text:"Womp,womp... Try harder next time,and\nmaybe you'll score more"},{status:"welcome",text:'This game has been modeled-off Google`s <a href="https://quickdraw.withgoogle.com/">Quick Draw!</a> game,\n and uses a sampling from the Quick, Draw! <a href="https://github.com/googlecreativelab/quickdraw-dataset">dataset</a>.'},{status:"toYouby",text:"Brought to you by the EPFL extention School."}],w=n(3),k={position:"absolute",left:"850px",top:"15px"},j={position:"absolute",left:"800px",top:"70px"},O={height:"160px"};function S(){var e=Object(a.useContext)(Q),t=e.resetRounds,n=e.score,o=e.dispatch;return r.a.createElement(g,{style:O,title:"Sketch!",dark:!0},r.a.createElement(s,null,r.a.createElement(u,null,"you scored : ",n,r.a.createElement(b,{strings:[y("gameEndFailure")]})),r.a.createElement(u,null,r.a.createElement(s,null,"\xa0"),r.a.createElement(s,null,r.a.createElement(w.a,{to:"/"},r.a.createElement("button",{type:"button",style:k,className:"nes-btn"},"Home")),r.a.createElement(w.a,{to:"/game"},r.a.createElement("button",{className:"nes-btn is-warning",style:j,onClick:function(){t(),o({type:"reset"})}},"Try Again."))))))}var C=n(6);function R(e,t){switch(t.type){case"reset":return 0;case"one":return e+1;case"two":return e+2;default:return e}}var N=r.a.forwardRef((function(e,t){var n,o,c=!1;return Object(a.useEffect)((function(){var e=t.current,n=e.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,e.height,e.width)})),r.a.createElement("canvas",{height:300,width:300,ref:t,onMouseDown:function(){return c=!0},onMouseUp:function(){c=!1,n=void 0,o=void 0},onMouseMove:function(e){return function(e){var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientY-t.top;if(c){var s=function(e,t,n,a,r){var o=e.getContext("2d");return o.strokeStyle="#000000",o.lineWidth=12,o.lineJoin="round",o.beginPath(),o.moveTo(a,r),o.lineTo(t,n),o.closePath(),o.stroke(),[t,n]}(e.target,a,r,n,o),u=Object(l.a)(s,2);n=u[0],o=u[1]}}(e)}})})),P=n(14),F=n.n(P),T=n(22);function D(e,t){var n,a=(n=e,C.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.then((function(e){return e.predict(a).data()})).then(function(){var e=Object(T.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var B={position:"absolute",left:"500px",top:"300px"},M={position:"absolute",left:"500px",top:"250px"};function W(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.nextRound,o=e.score,c=e.dispatch,s=e.ref,u=e.model,i=e.labels,m=Object(a.useState)(""),f=Object(l.a)(m,2),d=f[0],p=f[1],h=Object(a.useContext)(I),b=h.seconds,v=h.resetTimer;function E(){console.log("Prediction: "+d),D(s,u).then((function(e){p(i[e[0]]),i[e[0]]===i[t]&&(b<10?(c({type:"one"}),console.log("+1")):(c({type:"two"}),console.log("+2")))})),n(),v(),Object(w.c)("game")}return r.a.createElement("div",null,b>0?r.a.createElement("div",null,r.a.createElement("button",{style:B,className:"nes-btn is-warning",id:"clear",onClick:function(){var e=s.current;e.getContext("2d").fillRect(0,0,e.height,e.width)}},"Clear the canvas."),r.a.createElement("button",{className:"nes-btn is-warning",style:M,onClick:function(){return E()},id:"predict"},"Predict the drawing."),r.a.createElement("div",null,"your Score : ",o)):E())}var I=r.a.createContext({});function J(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.labels,o=function(){var e=Object(a.useState)(20),t=Object(l.a)(e,2),n=t[0],r=t[1];return[setInterval((function(){0===n?clearInterval():r(n-1)}),1e3),n,function(){return r(20)}]}(),c=Object(l.a)(o,3),s=c[0],u=c[1],i=c[2];return Object(a.useEffect)((function(){return function(){return clearInterval(s)}}),[t,n,s]),r.a.createElement("div",null,"you have ",u," to draw ",n[t],r.a.createElement(I.Provider,{value:{seconds:u,resetTimer:i}},r.a.createElement(W,null)))}var Y={position:"relative",left:"850px",top:"-20px"};function q(){var e=Object(a.useContext)(Q),t=e.currentRound,n=e.ref,o=e.labels;return r.a.createElement(g,{title:"Sketch! - Round "+(t+1)+" of "+o.length,dark:!0},r.a.createElement("div",null,r.a.createElement(w.a,{to:"/"},r.a.createElement("button",{type:"button",style:Y,className:"nes-btn"},"Home"))),r.a.createElement(s,null,r.a.createElement(u,null,r.a.createElement(N,{ref:n})),r.a.createElement(u,null,r.a.createElement(s,null,r.a.createElement(b,{strings:[y("gameFailure")]})),r.a.createElement(s,null),r.a.createElement(s,null,"\xa0"),r.a.createElement(s,null,r.a.createElement(J,null)))))}var z=C.c("/Sketch/model/model.json"),G=n(47),H=r.a.createRef(),Q=r.a.createContext();function U(){var e=function(e){var t=Object(a.useState)(0),n=Object(l.a)(t,2),r=n[0],o=n[1];return[r,o,function(){return o(r+1)},function(){return o(0)}]}(),t=Object(l.a)(e,4),n=t[0],o=t[1],c=t[2],s=t[3],u=Object(a.useReducer)(R,0),i=Object(l.a)(u,2),m=i[0],f=i[1];return r.a.createElement(Q.Provider,{value:{currentRound:n,setCurrentRound:o,nextRound:c,resetRounds:s,score:m,dispatch:f,ref:H,model:z,labels:G}},n>9?r.a.createElement(S,null):r.a.createElement(q,null))}function A(){return r.a.createElement(g,{dark:!0},r.a.createElement(u,null,r.a.createElement("h1",null,"Sketch!"),r.a.createElement(s,null,r.a.createElement(b,{strings:[y("welcome")]})),r.a.createElement(s,null,"\xa0"),r.a.createElement(s,null,y("toYouby")),r.a.createElement(s,null,"\xa0"),r.a.createElement(w.a,{to:"/game"},r.a.createElement("button",{type:"button",className:"nes-btn"},"Play game"))))}c.a.render(r.a.createElement(w.b,null,r.a.createElement(A,{path:"/Sketch/"}),r.a.createElement(U,{path:"/Sketch/game"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.02fc8ada.chunk.js.map